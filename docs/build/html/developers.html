<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; SlicerPRISMRendering  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />

  
    <link rel="shortcut icon" href="_static/logoPRISMRenderingHTMLfavicon.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code documentation" href="code.html" />
    <link rel="prev" title="Panels and their use" href="panels.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SlicerPRISMRendering
              <img src="_static/logoPRISMRenderingHTML.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">General Informations</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="panels.html">Panels and their use</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">Code documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SlicerPRISMRendering</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/developers.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <!-- # Information for Developers

See [this page](https://githubcomets-vis-interactiveSlicerPRISMRenderingrendering.readthedocs.io/en/latest/code.html) for the full code documentation.

<a name="howto"></a>

## How Tos

### Create a shader 

Each of the volume rendering techniques is containted into one Python file and the GLSL code must be specified in the ```setupShader()``` method of the class.
This code must be written as a string which is transmitted to the shader carrying out the volume rendering by using the vtk shader modification classes [vtkUniforms](https://vtk.org/doc/nightly/html/classvtkUniforms.html) and [vtkShaderProperty](https://vtk.org/doc/nightly/html/classvtkShaderProperty.html). These strings replace on the fly tags in the format //VTK::SomeConcept::SomeAction in a shader template file. There is a defined list of tags that are suitable for different uses and the appropriate tag for the part of code you want to change in the shader must be specified in the Python class, as well as with the character string containing the code to replace. A more complete description of these tags can be found [here](https://kitware.github.io/vtk-js/api/Rendering_OpenGL_glsl.html). This is done in the following form:

``` python
replacement_code = """GLSL code"""
shader.AddFragmentShaderReplacement ("//VTK::SomeConcept::SomeAction", replacement_code)
```

Multiple tags can be used for one shader and they should all be specified in the ```setupShader()``` method.

The uniforms variables of the shader are defined as Python dictionnary and must be specified after the class declaration. There are 7 types of variables that can be added to the shader and they must respect this format, where \<name\> is the name used in the shader and \<display name\> is the name displayed in the UI :

#### Float

```python
shaderfParams = { '<name>' : { 'displayName' : '<display name>', 'min' : <minimum value>, 'max' : <maximum value>, 'defaultValue' : <default value>}, \
                  '<name>' : { ...}, \
                   ... }
```

#### Integer

```python
shaderiParams = { '<name>' : { 'displayName' : '<display name>', 'min' : <minimum value>, 'max' : <maximum value>, 'defaultValue' : <default value>}, \
                  '<name>' : { ...}, \
                   ... }
```

#### Point

```python
shader4fParams = { '<name>': {'displayName': '<display name>', 'defaultValue': {'x': <x value>, 'y': <y value>, 'z': <z value>, 'w': <w value>}}, \
                   '<name>' : { ...}, \
                    ... }
```
#### Boolean

```python
shaderbParams = { '<name>' : { 'displayName' : '<display name>', 'defaultValue' : <default value>, 'optionalWidgets' : [<name of optional parameter>, ...]}, \
                  '<name>' : { ...}, \
                   ... }
```

#### Range

```python
shaderrParams = { '<name>' : { 'displayName' : '<display name>', 'defaultValue' : [<minimum value>, <maximum value>]}, \
                  '<name>' : { ...}, \
                   ... }
```

#### Transfer functions

```python
shadertfParams = { '<name>' : { 'displayName' : '<display name>', 'defaultColors' : [[<First point x value>, <First point red value>, <First point green value>, <First point blue value>, <First point midpoint value>, <First point midpoint s Sharpness value> if color; <First point x value>, <First point opacity value>, <First point midpoint value>, <First point midpoint s sharpness value> if scalar opacity], ...], 'type' : '<'color' or 'scalarOpacity'>'}, \
                  '<name>' : { ...}, \
                   ... }
``` 

If the original values of the volume are to be keeped, the 'defaultColors' must be defined as : ```'defaultColors' : [] ```.
Each volume can only have one of each (color and opacity) transfer functions.
This parameter controls the two transfer functions of the principal volume.

#### Volume

```python
shadervParams = { '<name>' : { 'displayName' : '<display name>', 'defaultVolume' : <id of the volume>, 'transferFunctions' : {<transfer functions>}}, \
                  '<name>' : { ...}, \
                   ... }
```

If mutliple volumes are needed, make sure that the ids are differents. By default, you should use 1, 2, 3, ... as ids. If no transfer function are defined, the default ones of the volume will be used.


<a name="lim"></a>

## Limitations


### Multiple volumes

Currently the use of multiple volumes in a shader is not supported. Multiple volumes can be added into the scene by using the "volume" parameter but we have not been able yet to find how to link the secondary volumes to the shader.


### Editing existing shaders

We are still exploring the different approaches to find the ideal way to integrate this feature into the UI. For now, the only thing allowed in this feature is to add a section of code and not to modify the ones that are already present into the python class. 
To manually modify the file containing the current shader, it can be duplicated or opened by clicking on the "..." button and then "Duplicate" or "Open" in the "Custom shader" section :

<img src="https://raw.githubusercontent.com/ETS-vis-interactive/SlicerPRISMRendering/master/docs/source/images/tutorials/limitations/editShader1.png" width ="60%" style="margin-left: auto; margin-right: auto; display: block;"/>


or on the "Open File" button in the "Modify or Create Custom Shader" section :

<img src="https://raw.githubusercontent.com/ETS-vis-interactive/SlicerPRISMRendering/master/docs/source/images/tutorials/limitations/editShader2.png" width ="60%" style="margin-left: auto; margin-right: auto; display: block;"/>
 -->

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="panels.html" class="btn btn-neutral float-left" title="Panels and their use" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="code.html" class="btn btn-neutral float-right" title="Code documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Tiphaine RICHARD.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>